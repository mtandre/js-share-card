<!DOCTYPE html>

<html>
<head>
  <title>canvas.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>canvas.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>default image settings
align bottom of image to bottom of canvas
align middle of image to middle of canvas
align top of image to top of canvas
add semi-transparent overlay</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> defaultOptions = { 
    bottom: <span class="hljs-literal">false</span>,
    middle: <span class="hljs-literal">false</span>, 
    top: <span class="hljs-literal">true</span>, 
    fade: <span class="hljs-literal">false</span> 
};</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>getContent helper for cross-domain</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> bootstrap = <span class="hljs-string">"content"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>global content store</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> savedData = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>image width always = 900px, store computed height for calcs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> imageY = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>prefill canvas with “getting started” message</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canvasInit</span><span class="hljs-params">()</span> </span>{
	<span class="hljs-keyword">var</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"canvas"</span>);
	<span class="hljs-keyword">if</span> (canvas.getContext) {
		<span class="hljs-keyword">var</span> ctx = canvas.getContext(<span class="hljs-string">"2d"</span>);
		ctx.fillStyle = <span class="hljs-string">'#444'</span>;
		ctx.font = <span class="hljs-string">'28px Arial'</span>;
		wrapText(ctx, <span class="hljs-string">"← Start by entering a jsonline.com url on the left."</span>, <span class="hljs-number">100</span>, <span class="hljs-number">25</span>, <span class="hljs-number">700</span>, <span class="hljs-number">50</span>);
	}
}</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>main drawing method
@params image url, photo credit text, headline text, global image height, options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span><span class="hljs-params">(_image, _credit, _title, _imageY, _opts)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>make sure there’s a clean canvas</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	clearCanvas();
	<span class="hljs-keyword">var</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"canvas"</span>);
	<span class="hljs-keyword">if</span> (canvas.getContext) {
		<span class="hljs-keyword">var</span> ctx = canvas.getContext(<span class="hljs-string">"2d"</span>);

		<span class="hljs-keyword">if</span> (_opts === <span class="hljs-literal">undefined</span>) {
			<span class="hljs-keyword">var</span> _opts = defaultOptions;
		}

		<span class="hljs-keyword">var</span> bgImageObj = <span class="hljs-keyword">new</span> Image();
		bgImageObj.src = _image;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>load image</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		bgImageObj.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
			<span class="hljs-keyword">if</span> (_opts.bottom) {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>align image: bottom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				ctx.drawImage(bgImageObj, <span class="hljs-number">0</span>, (<span class="hljs-number">0</span> - (_imageY - <span class="hljs-number">450</span>)));
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_opts.middle) {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>align image: middle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				ctx.drawImage(bgImageObj, <span class="hljs-number">0</span>, (<span class="hljs-number">0</span> - ((_imageY - <span class="hljs-number">450</span>) / <span class="hljs-number">2</span>)));
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>align image: top (default)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				ctx.drawImage(bgImageObj, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
			}

			<span class="hljs-keyword">if</span> (_opts.fade) {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>darken image</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				ctx.fillStyle = <span class="hljs-string">"rgba(0, 0, 0, 0.2)"</span>;
				ctx.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.width, canvas.height);
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>text shadow</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				ctx.shadowColor = <span class="hljs-string">'#000'</span>;
				ctx.shadowOffsetX = <span class="hljs-number">1</span>;
				ctx.shadowOffsetY = <span class="hljs-number">1</span>;
				ctx.shadowBlur = <span class="hljs-number">40</span>;
			}
			ctx.fillStyle = <span class="hljs-string">'#fff'</span>;
			ctx.font = <span class="hljs-string">'48px Georgia'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			wrapText(ctx, _title, <span class="hljs-number">100</span>, <span class="hljs-number">310</span>, <span class="hljs-number">700</span>, <span class="hljs-number">50</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>photo credit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			ctx.font = <span class="hljs-string">'14px Arial'</span>;
			ctx.fillText(<span class="hljs-string">'Photo by: '</span> + _credit, <span class="hljs-number">8</span>, <span class="hljs-number">442</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>js logo</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> jsImageObj = <span class="hljs-keyword">new</span> Image();
			jsImageObj.src = <span class="hljs-string">'js_logo.png'</span>;
			jsImageObj.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
				ctx.drawImage(jsImageObj, <span class="hljs-number">676</span>, <span class="hljs-number">424</span>);
			};
		};
	}
}</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>clear canvas by drawing a white rectangle over entire canvas</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearCanvas</span><span class="hljs-params">()</span> </span>{
	<span class="hljs-keyword">var</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"canvas"</span>);
	<span class="hljs-keyword">if</span> (canvas.getContext) {
		<span class="hljs-keyword">var</span> ctx = canvas.getContext(<span class="hljs-string">"2d"</span>);
		ctx.clearRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.width, canvas.height);
	}
}</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>modify defaults and redraw canvas
toggle image position and fade overlay</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateImage</span><span class="hljs-params">(update)</span> </span>{
	<span class="hljs-keyword">if</span> (update === <span class="hljs-string">"top"</span>) {
		defaultOptions.top = <span class="hljs-literal">true</span>;
		defaultOptions.middle = <span class="hljs-literal">false</span>;
		defaultOptions.bottom = <span class="hljs-literal">false</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (update === <span class="hljs-string">"middle"</span>) {
		defaultOptions.top = <span class="hljs-literal">false</span>;
		defaultOptions.middle = <span class="hljs-literal">true</span>;
		defaultOptions.bottom = <span class="hljs-literal">false</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (update === <span class="hljs-string">"bottom"</span>) {
		defaultOptions.top = <span class="hljs-literal">false</span>;
		defaultOptions.middle = <span class="hljs-literal">false</span>;
		defaultOptions.bottom = <span class="hljs-literal">true</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (update === <span class="hljs-string">"fadeOn"</span>) {
		defaultOptions.fade = <span class="hljs-literal">true</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (update === <span class="hljs-string">"fadeOff"</span>) {
		defaultOptions.fade = <span class="hljs-literal">false</span>;
	}
	draw(savedData.photo, savedData.credit, savedData.title, savedData.imageY, defaultOptions);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>redraw modified title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateText</span><span class="hljs-params">(newText)</span> </span>{
	clearCanvas();
	draw(savedData.photo, savedData.credit, newText, savedData.imageY);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>wrap text to fit inside bounds</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapText</span><span class="hljs-params">(ctx, text, x, y, maxWidth, lineHeight)</span> </span>{
	<span class="hljs-keyword">var</span> words = text.split(<span class="hljs-string">' '</span>);
	<span class="hljs-keyword">var</span> line = <span class="hljs-string">''</span>;

	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>; n &lt; words.length; n++) {
		<span class="hljs-keyword">var</span> testLine = line + words[n] + <span class="hljs-string">' '</span>;
		<span class="hljs-keyword">var</span> metrics = ctx.measureText(testLine);
		<span class="hljs-keyword">var</span> testWidth = metrics.width;
		<span class="hljs-keyword">if</span> (testWidth &gt; maxWidth &amp;&amp; n &gt; <span class="hljs-number">0</span>) {
			ctx.fillText(line, x, y);
			line = words[n] + <span class="hljs-string">' '</span>;
			y += lineHeight;
		} <span class="hljs-keyword">else</span> {
			line = testLine;
		}
	}
	ctx.fillText(line, x, y);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>cross-browser method to force download of of canvas as image</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dlCanvas</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> dl = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'dl'</span>);
    <span class="hljs-keyword">var</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"canvas"</span>);
    <span class="hljs-keyword">var</span> dc = canvas.toDataURL(<span class="hljs-string">'image/png'</span>);
    <span class="hljs-comment">/* Change MIME type to trick the browser to downlaod the file instead of displaying it */</span>
    dc = dc.replace(<span class="hljs-regexp">/^data:image\/[^;]*/</span>, <span class="hljs-string">'data:application/octet-stream'</span>);
    <span class="hljs-comment">/* In addition to &lt;a&gt;'s "download" attribute, you can define HTTP-style headers */</span>
    dc = dc.replace(<span class="hljs-regexp">/^data:application\/octet-stream/</span>, <span class="hljs-string">'data:application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=mjsShareCard.png'</span>);
    <span class="hljs-built_in">window</span>.open(dc);</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>dl.href = dc;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>};</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>get content from mjs api</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContent</span><span class="hljs-params">(url)</span> </span>{
	<span class="hljs-keyword">if</span> (url.indexOf(<span class="hljs-string">'.jsonline.com'</span>) &gt; -<span class="hljs-number">1</span>) {
		<span class="hljs-keyword">var</span> id = url.match(<span class="hljs-regexp">/(?!-)\d+(?=\.html)/</span>)[<span class="hljs-number">0</span>];
		<span class="hljs-keyword">var</span> apiUrl = <span class="hljs-string">'http://m.jsonline.com/api/v1/?id='</span> + id + <span class="hljs-string">'&amp;bootstrap='</span> + bootstrap;
		bootstrapContent(apiUrl, parseContent);
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">var</span> newUrl = prompt(<span class="hljs-string">'Something about that URL is incorrect. It must be a valid JSOnline.com link to an article or blog post. Double check and try again:'</span>);
		getContent(newUrl);
		<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'url'</span>).value = newUrl;
	}
}</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>using bootstrap method, includes file with global variable: bootstrap</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrapContent</span><span class="hljs-params">(url, callback)</span> </span>{
	<span class="hljs-keyword">var</span> tag = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
	tag.type = <span class="hljs-string">'text/javascript'</span>;
	tag.src = url;
	tag.onreadystatechange = callback;
	tag.onload = callback;
	<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>].appendChild(tag);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>get content from new global object aka api</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseContent</span><span class="hljs-params">()</span> </span>{
	<span class="hljs-keyword">var</span> data = <span class="hljs-built_in">window</span>[bootstrap].collection;
	data = data[<span class="hljs-number">0</span>];
	<span class="hljs-keyword">var</span> tempData = {};
	tempData.title = data.title.replace(<span class="hljs-regexp">/&lt;\/?[^&gt;]+(&gt;|$)/g</span>, <span class="hljs-string">" "</span>).replace(<span class="hljs-string">'&amp;quot;'</span>, <span class="hljs-string">'"'</span>).replace(<span class="hljs-string">'&amp;amp;'</span>, <span class="hljs-string">'&amp;'</span>) || <span class="hljs-string">""</span>;
	tempData.photo = relayImageUrl(resizeImage(data.photoUrl));
	tempData.credit = data.photoCredit;
	tempData.imageY = imageY;
	savedData = tempData;
	fillContent(savedData);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>use clickability to get a correctly sized and scaled image</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resizeImage</span><span class="hljs-params">(imageUrl)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>resize image url - messy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> original = imageUrl;
	<span class="hljs-keyword">var</span> dims = original.match(<span class="hljs-regexp">/\/\d+\*\d+\//g</span>); <span class="hljs-comment">// get dimensions out of url</span>
	<span class="hljs-keyword">if</span> (dims) {
		<span class="hljs-keyword">var</span> dim = dims[<span class="hljs-number">0</span>];
		<span class="hljs-keyword">var</span> trimmed = dim.replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">''</span>); <span class="hljs-comment">// strip slashes </span>
		<span class="hljs-keyword">var</span> parts = trimmed.split(<span class="hljs-string">'*'</span>);
		<span class="hljs-keyword">var</span> x = <span class="hljs-built_in">parseInt</span>(parts[<span class="hljs-number">0</span>], <span class="hljs-number">10</span>); <span class="hljs-comment">// width</span>
		<span class="hljs-keyword">var</span> y = <span class="hljs-built_in">parseInt</span>(parts[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>); <span class="hljs-comment">// height</span>
		<span class="hljs-keyword">var</span> ymod = <span class="hljs-built_in">parseInt</span>((<span class="hljs-number">900</span> * y) / x); <span class="hljs-comment">// scale height to match width of 900</span>
		imageY = ymod;
		<span class="hljs-keyword">var</span> final = <span class="hljs-string">'/'</span> + <span class="hljs-number">900</span> + <span class="hljs-string">'*'</span> + ymod + <span class="hljs-string">'/'</span>; <span class="hljs-comment">// create new dims portion of url</span>
		<span class="hljs-keyword">return</span> original.replace(<span class="hljs-regexp">/\/\d+\*\d+\//g</span>, final) || <span class="hljs-literal">false</span>;
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>end messy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>}</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>in order to export canvas, it can’t be tainted, so we need the images on the same domain
bouncing the image through the same server solves this problem</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">relayImageUrl</span><span class="hljs-params">(imageUrl)</span> </span>{
	<span class="hljs-keyword">var</span> urlPieces = imageUrl.split(<span class="hljs-string">'.com'</span>);
	<span class="hljs-keyword">var</span> relayUrl = <span class="hljs-string">'/image?url='</span> + urlPieces[<span class="hljs-number">1</span>];
	<span class="hljs-keyword">return</span> relayUrl;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>got the content, fill the screen</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fillContent</span><span class="hljs-params">(dataObj)</span> </span>{
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'textoverride'</span>).value = dataObj.title;
    draw(dataObj.photo, dataObj.credit, dataObj.title, imageY);
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
